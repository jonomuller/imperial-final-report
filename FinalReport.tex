\documentclass[a4paper, 11pt]{report}

%\usepackage{fullpage}
%\usepackage[textwidth=16cm,textheight=24cm]{geometry}
%\usepackage[textwidth=6.3in]{geometry}
\usepackage{geometry}
\geometry{
  total={6.2in,8.5in},
  top=1.7in,
  headsep=0.7in,
  footskip=0.8in
}
\usepackage{enumitem}
\usepackage{setspace}
\usepackage{natbib}
\usepackage{array}
\usepackage{multirow}
\usepackage{pifont}
\usepackage{fancyhdr}
\usepackage[super]{nth}
\usepackage[letterspace=400]{microtype}
\usepackage{hhline}
\usepackage[table, dvipsnames]{xcolor}
\usepackage{listing}
\usepackage{listings, xcolor}
\usepackage{bold-extra}
\usepackage{float}
\usepackage{pgfplots}
\usepackage{graphicx}
\graphicspath{{images/}}

% Allows for hyperlinking throughout document
\usepackage{hyperref}

% listing design
\newcommand\JSONnumbervaluestyle{\color{blue}}
\newcommand\JSONstringvaluestyle{\color{red}}

% switch used as state variable
\newif\ifcolonfoundonthisline

\makeatletter

\lstdefinelanguage{JavaScript}{
  keywords={typeof, new, true, false, catch, function, return, null, catch, switch, var, if, in, while, do, else, case, break},
  keywordstyle=\color{blue}\bfseries,
  ndkeywords={class, export, boolean, throw, implements, import, this},
  ndkeywordstyle=\color{darkgray}\bfseries,
  identifierstyle=\color{black},
  sensitive=false,
  comment=[l]{//},
  morecomment=[s]{/*}{*/},
  commentstyle=\color{purple}\ttfamily,
  stringstyle=\color{red}\ttfamily,
  morestring=[b]',
  morestring=[b]",
  numbers=left,
  numberstyle=\footnotesize
%  frame=single
}

\lstdefinestyle{json}
{
  showstringspaces    = false,
  keywords            = {false,true},
  alsoletter          = 0123456789.,
  morestring          = [s]{"}{"},
  stringstyle         = \ifcolonfoundonthisline\JSONstringvaluestyle\fi,
  MoreSelectCharTable =%
    \lst@DefSaveDef{`:}\colon@json{\processColon@json},
  basicstyle          = \ttfamily,
  keywordstyle        = \ttfamily\bfseries,
  escapeinside={<@}{@>}
}

% flip the switch if a colon is found in Pmode
\newcommand\processColon@json{%
  \colon@json%
  \ifnum\lst@mode=\lst@Pmode%
    \global\colonfoundonthislinetrue%
  \fi
}

\lst@AddToHook{Output}{%
  \ifcolonfoundonthisline%
    \ifnum\lst@mode=\lst@Pmode%
      \def\lst@thestyle{\JSONnumbervaluestyle}%
    \fi
  \fi
  %override by keyword style if a keyword is detected!
  \lsthk@DetectKeywords% 
}

% reset the switch at the end of line
\lst@AddToHook{EOL}%
  {\global\colonfoundonthislinefalse}

\makeatother

% define global listing options
\lstset{
  showstringspaces=false,
  showspaces=false
}



\begin{document}

% fancy header at top of each page 
\pagestyle{fancy}
%\setlength{\headsep}{0.8cm} % changes space at top of page

% allows for normal citing with this bib style
\setcitestyle{square,numbers}

% Defines tick and cross
\newcommand{\cmark}{\ding{51}}%
\newcommand{\xmark}{\ding{55}}%

% Allows centred paragraph cells in tables
\newcolumntype{P}[1]{>{\centering\arraybackslash}p{#1}}
\newcolumntype{M}[1]{>{\centering\arraybackslash}m{#1}}

% Allows for horizontal lines with custom thickness on title page
\makeatletter
   \def\vhrulefill#1{\leavevmode\leaders\hrule\@height#1\hfill \kern\z@}
\makeatother

\include{sections/titlepage}

% set size between paragraphs
\setlength{\parskip}{0.3cm}

\begin{spacing}{1.1}
  \include{sections/abstract}
  \include{sections/acknowledgements}
\end{spacing}

%\begin{spacing}{1.1}
  \tableofcontents
%\end{spacing}
\newpage

\begin{spacing}{1.1}
  \include{sections/introduction}
  \include{sections/background}
  \include{sections/design}
  \include{sections/implementation}
  \include{sections/evaluation}
  \include{sections/conclusion}
  
  \bibliographystyle{unsrtnat}
  \bibliography{sections/library}
  \addcontentsline{toc}{chapter}{Bibliography}
  
  \appendix
  \include{sections/appendices/existing-apps}
  \include{sections/appendices/user-guide}
  \include{sections/appendices/final-survey}
\end{spacing}
  
\end{document}
